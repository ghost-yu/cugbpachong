# ğŸ”¥ Undetected ChromeDriver æ–¹æ¡ˆ - ç»ˆæè§£å†³æ–¹æ¡ˆ

## æ ¸å¿ƒä¼˜åŠ¿

### undetected-chromedriver æ˜¯ä»€ä¹ˆï¼Ÿ
ä¸“é—¨ç”¨æ¥**ç»•è¿‡Seleniumæ£€æµ‹**çš„å¢å¼ºç‰ˆChromeDriverï¼š
- âœ… è‡ªåŠ¨ç§»é™¤ `webdriver` ç‰¹å¾
- âœ… ä¿®æ”¹ Chrome DevTools Protocol æŒ‡çº¹
- âœ… ç»•è¿‡ Canvas æŒ‡çº¹æ£€æµ‹
- âœ… æ¨¡æ‹ŸçœŸå®æµè§ˆå™¨è¡Œä¸º
- âœ… è‡ªåŠ¨ä¸‹è½½å’Œç®¡ç†é©±åŠ¨

### ä¸åŸç‰ˆSeleniumå¯¹æ¯”

| ç‰¹æ€§ | æ™®é€šSelenium | undetected-chromedriver |
|------|-------------|------------------------|
| webdriveræ£€æµ‹ | âŒ å¯è¢«æ£€æµ‹ | âœ… å®Œå…¨ç»•è¿‡ |
| CanvasæŒ‡çº¹ | âŒ å¼‚å¸¸ | âœ… æ­£å¸¸ |
| è‡ªåŠ¨åŒ–æ ‡è¯† | âŒ æ˜æ˜¾ | âœ… éšè— |
| æ»‘å—é€šè¿‡ç‡ | 10-30% | **70-90%** |

## æ”¹è¿›çš„æ»‘å—ç®—æ³•

### 5å¤§ç­–ç•¥ä¼˜åŒ–

1. **è¶…çº§æ‹ŸäººåŒ–è½¨è¿¹**
   - 6ä¸ªé˜¶æ®µï¼šå¿«é€Ÿå¯åŠ¨â†’ä¸­é€Ÿâ†’å‡é€Ÿâ†’ç²¾ç¡®â†’å›é€€â†’å¾®è°ƒ
   - æ¯ä¸ªé˜¶æ®µé€Ÿåº¦å’Œè·ç¦»éƒ½ä¸åŒ

2. **Yè½´æŠ–åŠ¨**
   - çœŸäººæ‹–åŠ¨ä¸æ˜¯å®Œç¾æ°´å¹³çº¿
   - éšæœºä¸Šä¸‹åç§» Â±2px

3. **åŠ¨æ€é€Ÿåº¦**
   - å¼€å§‹å¿«ï¼š3-8ms
   - ä¸­é—´ä¸­ç­‰ï¼š8-15ms
   - ç»“å°¾æ…¢ï¼š15-30ms

4. **å¤šç­–ç•¥å°è¯•**
   - ä¿å®ˆç­–ç•¥ï¼š65-75%è·ç¦»
   - ä¸­ç­‰ç­–ç•¥ï¼š70-80%è·ç¦»
   - æ¿€è¿›ç­–ç•¥ï¼š75-85%è·ç¦»
   - è‡ªåŠ¨è½®æ¢

5. **æ™ºèƒ½é‡è¯•**
   - æœ€å¤š5æ¬¡å°è¯•
   - æ¯æ¬¡ç­–ç•¥ä¸åŒ
   - å¤±è´¥ååˆ·æ–°æ»‘å—

## ä½¿ç”¨æ–¹æ³•

### 1. å®‰è£…ä¾èµ–
```bash
pip install undetected-chromedriver
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
```powershell
$env:STUDENT_ID="ä½ çš„å­¦å·"
$env:PASSWORD="ä½ çš„å¯†ç "
$env:EMAIL_USER="QQé‚®ç®±@qq.com"
$env:EMAIL_PASS="QQé‚®ç®±æˆæƒç "
```

### 3. è¿è¡Œæµ‹è¯•
```bash
python main_undetected.py
```

### 4. è§‚å¯Ÿç»“æœ
ç¨‹åºä¼šï¼š
- ğŸŒ æ‰“å¼€æµè§ˆå™¨ï¼ˆæœ‰å¤´æ¨¡å¼ï¼Œå¯ä»¥çœ‹åˆ°ï¼‰
- ğŸ“ æ¨¡æ‹ŸçœŸäººè¾“å…¥è´¦å·å¯†ç ï¼ˆå¸¦å»¶è¿Ÿï¼‰
- ğŸ–±ï¸ è‡ªåŠ¨æ‹–åŠ¨æ»‘å—ï¼ˆ5æ¬¡æœºä¼šï¼‰
- âœ… ç™»å½•æˆåŠŸåè®¿é—®æˆç»©é¡µ
- ğŸ“§ å‘ç°æ›´æ–°è‡ªåŠ¨å‘é‚®ä»¶

## æˆåŠŸç‡æå‡æŠ€å·§

### æŠ€å·§1: æœ‰å¤´æ¨¡å¼æµ‹è¯•
é¦–æ¬¡æµ‹è¯•å»ºè®®**ä¸è¦æ— å¤´æ¨¡å¼**ï¼š
```python
# main_undetected.py ç¬¬228è¡Œæ³¨é‡Šæ‰ï¼š
# options.add_argument("--headless=new")
```

é€šè¿‡ç‡å¯¹æ¯”ï¼š
- æœ‰å¤´æ¨¡å¼ï¼š**80-90%**
- æ— å¤´æ¨¡å¼ï¼š50-70%

### æŠ€å·§2: è°ƒæ•´è·ç¦»ç­–ç•¥
å¦‚æœ5æ¬¡éƒ½å¤±è´¥ï¼Œä¿®æ”¹ç¬¬157-161è¡Œï¼š
```python
strategies = [
    lambda: int((container_width - slider_width) * random.uniform(0.68, 0.73)),  # æ›´ä¿å®ˆ
    lambda: int((container_width - slider_width) * random.uniform(0.72, 0.78)),  
    lambda: int((container_width - slider_width) * random.uniform(0.76, 0.82)),  
]
```

### æŠ€å·§3: å¢åŠ éšæœºæ€§
åœ¨ç¬¬112-114è¡Œå¢åŠ é¼ æ ‡ç„å‡†éšæœºæ€§ï¼š
```python
action.move_to_element_with_offset(slider, 
                                  random.randint(-5, 5),  # æ”¹ä¸ºÂ±5
                                  random.randint(-5, 5)).perform()
```

### æŠ€å·§4: æ”¾æ…¢é€Ÿåº¦
åœ¨ç¬¬148-154è¡Œæ”¾æ…¢æ‹–åŠ¨é€Ÿåº¦ï¼š
```python
if i < len(tracks) * 0.2:
    t = random.uniform(0.01, 0.02)   # åŸæ¥ 0.003-0.008
elif i < len(tracks) * 0.8:
    t = random.uniform(0.02, 0.03)   # åŸæ¥ 0.008-0.015
else:
    t = random.uniform(0.03, 0.05)   # åŸæ¥ 0.015-0.030
```

## GitHub Actions éƒ¨ç½²

### æŒ‘æˆ˜
GitHub Actions æ˜¯**æ— å¤´ç¯å¢ƒ**ï¼Œé€šè¿‡ç‡ä¼šä¸‹é™åˆ°50-70%ã€‚

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆA: æ¥å—å¤±è´¥é‡è¯•
ä¿®æ”¹ `.github/workflows/monitor.yml`ï¼š
```yaml
- name: Run Monitor with Retry
  env:
    STUDENT_ID: ${{ secrets.STUDENT_ID }}
    PASSWORD: ${{ secrets.PASSWORD }}
    EMAIL_USER: ${{ secrets.EMAIL_USER }}
    EMAIL_PASS: ${{ secrets.EMAIL_PASS }}
  run: |
    # æœ€å¤šé‡è¯•3æ¬¡
    for i in {1..3}; do
      python main_undetected.py && break
      echo "å°è¯• $i å¤±è´¥ï¼Œ5åˆ†é’Ÿåé‡è¯•..."
      sleep 300
    done
```

#### æ–¹æ¡ˆB: é™ä½æ£€æŸ¥é¢‘ç‡
```yaml
on:
  schedule:
    # ä»30åˆ†é’Ÿæ”¹ä¸º2å°æ—¶ï¼Œå‡å°‘è§¦å‘é£æ§
    - cron: '0 */2 * * *'
```

#### æ–¹æ¡ˆC: ä½¿ç”¨2Captchaæ‰“ç æœåŠ¡ï¼ˆæœ€ç¨³å®šï¼‰
é›†æˆéªŒè¯ç æ‰“ç APIï¼š
```python
from twocaptcha import TwoCaptcha

solver = TwoCaptcha('YOUR_API_KEY')
result = solver.recaptcha(sitekey='...', url='...')
```

è´¹ç”¨ï¼šçº¦ $1-2 / 1000æ¬¡

## æ€§èƒ½å¯¹æ¯”

| æ–¹æ¡ˆ | é€šè¿‡ç‡ | æˆæœ¬ | å¤æ‚åº¦ | æ¨èåº¦ |
|------|--------|------|--------|--------|
| åŸç‰ˆSelenium | 10-30% | å…è´¹ | ä½ | â­ |
| OpenCVè¯†åˆ« | 20-40% | å…è´¹ | é«˜ | â­â­ |
| **undetected-chromedriver** | **70-90%** | å…è´¹ | ä¸­ | â­â­â­â­â­ |
| CookieæŒä¹…åŒ– | 100% | å…è´¹ | ä½ | âŒ (30åˆ†é’Ÿè¿‡æœŸ) |
| 2Captchaæ‰“ç  | 95-99% | ä»˜è´¹ | ä¸­ | â­â­â­â­ |

## è¿è¡Œæ—¥å¿—ç¤ºä¾‹

```
============================================================
ğŸš€ ä½¿ç”¨ Undetected ChromeDriver (ç»•è¿‡æ£€æµ‹ç‰ˆ)
============================================================

1ï¸âƒ£  è®¿é—®ç™»å½•é¡µ...
2ï¸âƒ£  å¡«å†™è´¦å·å¯†ç ...
3ï¸âƒ£  å¤„ç†æ»‘å—éªŒè¯...

â”â”â” å°è¯• 1/5 â”â”â”
   ç­–ç•¥: ä¿å®ˆ
   å®¹å™¨: 280px, æ»‘å—: 40px
   å¼€å§‹æ‹–åŠ¨: ç›®æ ‡è·ç¦» 168px
   æ‹–åŠ¨å®Œæˆ
   âœ— ç¬¬ 1 æ¬¡å°è¯•å¤±è´¥ï¼Œç­‰å¾…é‡è¯•...

â”â”â” å°è¯• 2/5 â”â”â”
   ç­–ç•¥: ä¸­ç­‰
   å®¹å™¨: 280px, æ»‘å—: 40px
   å¼€å§‹æ‹–åŠ¨: ç›®æ ‡è·ç¦» 182px
   æ‹–åŠ¨å®Œæˆ
âœ“âœ“âœ“ æ»‘å—éªŒè¯æˆåŠŸï¼

4ï¸âƒ£  ç‚¹å‡»ç™»å½•...
âœ“âœ“âœ“ ç™»å½•æˆåŠŸï¼

5ï¸âƒ£  è®¿é—®æˆç»©é¡µé¢...
ğŸ“‹ æš‚æ— æˆç»©ç»“æœ

æŒ‰å›è½¦é”®å…³é—­æµè§ˆå™¨...
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜1: ä¾ç„¶è¢«æ£€æµ‹
**ç—‡çŠ¶**: æ»‘å—5æ¬¡éƒ½å¤±è´¥  
**è§£å†³**: 
- æ£€æŸ¥Chromeç‰ˆæœ¬ï¼ˆéœ€Chrome 100+ï¼‰
- å°è¯•æœ‰å¤´æ¨¡å¼
- å¢åŠ å»¶è¿Ÿæ—¶é—´

### é—®é¢˜2: ChromeDriverç‰ˆæœ¬ä¸åŒ¹é…
**ç—‡çŠ¶**: å¯åŠ¨å¤±è´¥  
**è§£å†³**: 
```bash
pip install --upgrade undetected-chromedriver
```

### é—®é¢˜3: æ— å¤´æ¨¡å¼é€šè¿‡ç‡ä½
**ç—‡çŠ¶**: æœ¬åœ°æˆåŠŸï¼ŒActionså¤±è´¥  
**è§£å†³**: 
- æ–¹æ¡ˆA: æ¥å—50%æˆåŠŸç‡ï¼Œå¤šæ¬¡é‡è¯•
- æ–¹æ¡ˆB: ä»˜è´¹ä½¿ç”¨2Captcha

## ç«‹å³æµ‹è¯•

```bash
# 1. å®‰è£…ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
pip install undetected-chromedriver

# 2. é…ç½®ç¯å¢ƒå˜é‡
$env:STUDENT_ID="ä½ çš„å­¦å·"
$env:PASSWORD="ä½ çš„å¯†ç "

# 3. è¿è¡Œ
python main_undetected.py

# 4. è§‚å¯Ÿæµè§ˆå™¨è‡ªåŠ¨æ“ä½œ
```

**å»ºè®®**: å…ˆè¿è¡Œ3-5æ¬¡æœ¬åœ°æµ‹è¯•ï¼Œè§‚å¯Ÿé€šè¿‡ç‡ï¼Œå†å†³å®šæ˜¯å¦éƒ¨ç½²åˆ°GitHub Actionsã€‚

## æœ€ç»ˆå»ºè®®

- **æœ¬åœ°å®šæ—¶ä»»åŠ¡**: ä½¿ç”¨è¿™ä¸ªæ–¹æ¡ˆ âœ…
- **GitHub Actions**: 
  - é€šè¿‡ç‡70%ä»¥ä¸Š â†’ å¯ä»¥æ¥å— âœ…
  - é€šè¿‡ç‡50%ä»¥ä¸‹ â†’ è€ƒè™‘2Captcha ğŸ’°
